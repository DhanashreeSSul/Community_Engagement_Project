<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agriculture Schemes</title>
    <link rel="stylesheet" href="stylesschemes.css">
</head>
<body>
    <header>
        <h1>Agriculture Schemes Portal</h1>
        <p>Empowering farmers by connecting them with the right opportunities</p>
    </header>

    <div class="container">
        <h2>Available Schemes</h2>

        <div class="filter">
            <label for="filterSelect">Filter schemes by type:</label>
            <select id="filterSelect" onchange="filterSchemes()">
                <option value="all">All Schemes</option>
                <option value="insurance">Insurance</option>
                <option value="irrigation">Irrigation</option>
                <option value="housing">Housing</option>
                <option value="infrastructure">Infrastructure</option>
            </select>
        </div>

        <div id="schemeResults" class="schemes">
            <p>Loading schemes...</p>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Agriculture Schemes Portal. All rights reserved.</p>
    </footer>

    <script>
       const apiKey = '579b464db66ec23bdd0000018073a827c89b44077e0e13abdafd1426';
       const apiUrl = 'https://api.data.gov.in/resource/<resource-id>'; 

async function fetchSchemes() {
    try {
        // Fetch API data
        const response = await fetch(`${apiUrl}?api-key=${apiKey}&format=json`);
        
        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        
        const data = await response.json();
        
        if (!data.records || data.records.length === 0) {
            throw new Error("No schemes found in API response.");
        }

        displaySchemes(data.records);
    } catch (error) {
        console.error('Error fetching schemes:', error);
        document.getElementById('schemeResults').innerHTML = `<p>Failed to load schemes: ${error.message}</p>`;
    }
}

function displaySchemes(schemes) {
    const container = document.getElementById('schemeResults');
    container.innerHTML = ''; // Clear previous content

    schemes.forEach(scheme => {
        const schemeDiv = document.createElement('div');
        schemeDiv.classList.add('scheme');
        schemeDiv.innerHTML = `
            <h3>${scheme.scheme_name || 'No Name'}</h3>
            <p>${scheme.description || 'No description available'}</p>
            <a href="${scheme.url || '#'}" target="_blank">Learn More</a>
        `;
        container.appendChild(schemeDiv);
    });
}

// Fetch schemes on page load
window.onload = fetchSchemes;


    </script>
</body>
</html>
